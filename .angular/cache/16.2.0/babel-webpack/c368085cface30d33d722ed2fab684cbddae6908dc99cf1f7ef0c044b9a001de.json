{"ast":null,"code":"import _asyncToGenerator from \"/Users/vincentdarcq/Documents/gitws/exclusio-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Subscription } from 'rxjs';\nimport { Movie } from '../models/movie';\nimport { MoviesService } from '../services/movies.service';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movies.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../infobulle/infobulle.component\";\nfunction CarousselComponent_section_3_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵlistener(\"click\", function CarousselComponent_section_3_span_4_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const movie_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.showDetails(movie_r1));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarousselComponent_section_3_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵlistener(\"click\", function CarousselComponent_section_3_span_5_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.hideDetails());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarousselComponent_section_3_app_infobulle_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-infobulle\", 14);\n  }\n  if (rf & 2) {\n    const movie_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"movie\", movie_r1);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/movie\", a1];\n};\nfunction CarousselComponent_section_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 5)(1, \"div\", 6)(2, \"a\", 7);\n    i0.ɵɵelement(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CarousselComponent_section_3_span_4_Template, 1, 0, \"span\", 9);\n    i0.ɵɵtemplate(5, CarousselComponent_section_3_span_5_Template, 1, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, CarousselComponent_section_3_app_infobulle_6_Template, 1, 1, \"app-infobulle\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@slideAnimation\", ctx_r0.sectionState);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(7, _c0, movie_r1.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", movie_r1.covPortrait, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", movie_r1.titre);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.show);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.show);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.item === movie_r1);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"fa-arrow-circle-left-shadow\": a0\n  };\n};\nconst _c2 = function (a0) {\n  return {\n    \"fa-arrow-circle-right-shadow\": a0\n  };\n};\nexport let CarousselComponent = /*#__PURE__*/(() => {\n  var _class;\n  class CarousselComponent {\n    constructor(moviesService) {\n      this.moviesService = moviesService;\n      this.movies = new Array();\n      this.prevMovies = new Array();\n      this.nextMovies = new Array();\n      this.item = new Movie();\n      this.show = false;\n      this.genresA = [];\n      this.reals = [];\n      this.actors = [];\n      this.subscription = new Subscription();\n      this.caroussel = new Array();\n      this.sectionState = 'visible';\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.subscription.add(_this.moviesService.getGenreSelectedS().subscribe( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (genres) {\n            if (genres.length > 0) {\n              _this.movies = (yield _this.moviesService.getMoviesPageWithExclusions(_this.page, genres, _this.moviesService.getSelectedReals(), _this.moviesService.getSelectedActors())).content;\n            }\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()));\n        _this.movies = (yield _this.moviesService.getMoviesPage(_this.page)).content;\n        _this.movies.shift();\n        _this.finalPage = _this.moviesService.getFinalPage;\n      })();\n    }\n    ngOnDestroy() {\n      this.subscription?.unsubscribe();\n    }\n    showDetails(movie) {\n      this.show = !this.show;\n      this.item = movie;\n    }\n    hideDetails() {\n      this.show = !this.show;\n      this.item = null;\n    }\n    prevSection() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.page >= 3) {\n          _this2.toggleSection();\n          _this2.page -= 3;\n          _this2.movies = (yield _this2.moviesService.getMoviesPage(_this2.page)).content;\n          _this2.movies.shift();\n          _this2.toggleSection();\n          _this2.toggleSection();\n        }\n      })();\n    }\n    nextSection() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        _this3.toggleSection();\n        _this3.page += 3;\n        _this3.movies = (yield _this3.moviesService.getMoviesPage(_this3.page)).content;\n        _this3.movies.shift();\n        _this3.toggleSection();\n        _this3.toggleSection();\n      })();\n    }\n    toggleSection() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (_this4.sectionState === 'visible') {\n          _this4.sectionState = 'hidden';\n        } else if (_this4.sectionState === 'hidden') {\n          _this4.sectionState = 'reappear';\n        } else {\n          _this4.sectionState = 'visible';\n        }\n      })();\n    }\n  }\n  _class = CarousselComponent;\n  _class.ɵfac = function CarousselComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.MoviesService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-caroussel\"]],\n    inputs: {\n      page: \"page\",\n      firstMovie: \"firstMovie\"\n    },\n    decls: 5,\n    vars: 8,\n    consts: [[1, \"container\"], [1, \"fa\", \"fa-arrow-circle-left\", 3, \"ngClass\", \"click\"], [1, \"slide\"], [\"class\", \"section\", 4, \"ngFor\", \"ngForOf\"], [1, \"fa\", \"fa-arrow-circle-right\", 3, \"ngClass\", \"click\"], [1, \"section\"], [1, \"col-sm-3\"], [3, \"routerLink\"], [1, \"image\", 3, \"src\", \"alt\"], [\"class\", \"fa fa-chevron-down\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"fa fa-chevron-up\", 3, \"click\", 4, \"ngIf\"], [3, \"movie\", 4, \"ngIf\"], [1, \"fa\", \"fa-chevron-down\", 3, \"click\"], [1, \"fa\", \"fa-chevron-up\", 3, \"click\"], [3, \"movie\"]],\n    template: function CarousselComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"span\", 1);\n        i0.ɵɵlistener(\"click\", function CarousselComponent_Template_span_click_1_listener() {\n          return ctx.prevSection();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, CarousselComponent_section_3_Template, 7, 9, \"section\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\", 4);\n        i0.ɵɵlistener(\"click\", function CarousselComponent_Template_span_click_4_listener() {\n          return ctx.nextSection();\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c1, ctx.page === ctx.page % 3));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"@slideAnimation\", ctx.sectionState);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.movies);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c2, ctx.page === ctx.finalPage));\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.RouterLink, i4.InfobulleComponent],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow:hidden;width:115%}.slide[_ngcontent-%COMP%]{display:flex;flex-direction:row}.active[_ngcontent-%COMP%]{transform:translate(0);transition:transform .5s ease-in-out}.inactive-left[_ngcontent-%COMP%], .inactive-main[_ngcontent-%COMP%]{transform:translate(-100vh);transition:transform .5s ease-in-out}a[_ngcontent-%COMP%]{font-size:5rem;color:#fff;text-decoration:none}button[_ngcontent-%COMP%]{position:relative;text-decoration:none;font-size:3em;text-align:center;z-index:2}span[_ngcontent-%COMP%]{position:relative;top:1em;cursor:pointer;z-index:2;font-size:3em}.fa-arrow-circle-left-shadow[_ngcontent-%COMP%], .fa-arrow-circle-right-shadow[_ngcontent-%COMP%]{color:gray;cursor:default}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:2px 0}.col-sm-3[_ngcontent-%COMP%]{padding:0 2px}.col-sm-3[_ngcontent-%COMP%]:hover{margin:0 2px;transition:.25s all;transform:scale(1.3);z-index:10}.col-sm-3[_ngcontent-%COMP%]:hover   .fa-chevron-down[_ngcontent-%COMP%]{color:#fff;position:absolute;font-size:2em;top:80%;left:75px;display:block}.col-sm-3[_ngcontent-%COMP%]:hover   .fa-chevron-up[_ngcontent-%COMP%]{color:#fff;position:relative;font-size:2em;top:70%;left:75px;display:block}.fa-chevron-down[_ngcontent-%COMP%], .fa-chevron-up[_ngcontent-%COMP%]{display:none}\"],\n    data: {\n      animation: [trigger('slideAnimation', [state('visible', style({\n        transform: 'translateX(0)'\n      })), state('hidden', style({\n        transform: 'translateX(-100%)',\n        display: 'none'\n      })), state('reappear', style({\n        transform: 'translateX(100%)'\n      })), transition('visible => hidden', [animate('500ms', style({\n        transform: 'translateX(-100%)'\n      }))]), transition('hidden => reappear', [style({\n        transform: 'translateX(100%)',\n        display: 'block'\n      }), animate('500ms ease-in-out')]), transition('reappear => visible', [animate('500ms ease-in-out')])])]\n    }\n  });\n  return CarousselComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}