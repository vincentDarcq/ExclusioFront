{"ast":null,"code":"import _asyncToGenerator from \"/Users/vincentdarcq/Documents/gitws/exclusio-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { MoviesService } from '../services/movies.service';\nimport { genresAvances } from '../models/genres';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movies.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../star-rating/star-rating.component\";\nimport * as i5 from \"../checkboxes/checkboxes.component\";\nimport * as i6 from \"../caroussel/caroussel.component\";\nfunction MainComponent_input_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 16);\n    i0.ɵɵlistener(\"input\", function MainComponent_input_15_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.searched($event.target.value));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MainComponent_input_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 17);\n    i0.ɵɵlistener(\"input\", function MainComponent_input_19_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.searched($event.target.value));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MainComponent_input_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 18);\n    i0.ɵɵlistener(\"input\", function MainComponent_input_23_Template_input_input_0_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.searched($event.target.value));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MainComponent_app_checkboxes_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-checkboxes\", 19);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"categorie\", \"genres\");\n  }\n}\nfunction MainComponent_app_checkboxes_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-checkboxes\", 20);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"categorie\", \"genresA\")(\"itemFound\", ctx_r4.genreFound)(\"itemInput\", ctx_r4.genreInput);\n  }\n}\nfunction MainComponent_app_checkboxes_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-checkboxes\", 21);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"items\", ctx_r5.tenReals)(\"itemFound\", ctx_r5.realFound)(\"itemInput\", ctx_r5.realInput);\n  }\n}\nfunction MainComponent_app_checkboxes_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-checkboxes\", 21);\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"items\", ctx_r6.tenActors)(\"itemFound\", ctx_r6.actorFound)(\"itemInput\", ctx_r6.actorInput);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/movie\", a1];\n};\nfunction MainComponent_div_29_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 24)(2, \"a\", 25);\n    i0.ɵɵelement(3, \"img\", 26);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const movie_r16 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, movie_r16.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", movie_r16.covPortrait, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", movie_r16.titre);\n  }\n}\nfunction MainComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Votre Recherche\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22);\n    i0.ɵɵtemplate(5, MainComponent_div_29_div_5_Template, 4, 5, \"div\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.movieSearched);\n  }\n}\nfunction MainComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"a\", 25);\n    i0.ɵɵelement(2, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"div\", 28);\n    i0.ɵɵelement(6, \"app-star-rating\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 30);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, ctx_r8.bestMovie.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r8.bestMovie.covPortrait, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r8.bestMovie.titre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.bestMovie.titre, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"score\", ctx_r8.bestMovie.alloGrade)(\"forDisplay\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.bestMovie.year, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r8.bestMovie.synopsis);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    items: a0\n  };\n};\nexport let MainComponent = /*#__PURE__*/(() => {\n  var _class;\n  class MainComponent {\n    constructor(movieService) {\n      this.movieService = movieService;\n      this.movies = [];\n      this.bestAlloGrades = [];\n      this.oldBestAlloGrades = [];\n      this.movieSearched = [];\n      this.genres = [];\n      this.genresAvance = genresAvances;\n      this.avances = [];\n      this.realisateurs = [];\n      this.tenReals = [];\n      this.tenActors = [];\n      this.actors = [];\n      this.genresSelectedS = [];\n      this.genresSelectedA = [];\n      this.realisateursSelected = [];\n      this.actorsSelected = [];\n      this.notes = [];\n      this.exclusion = true;\n      this.displayGenres = true;\n      this.displayGenresAvance = false;\n      this.displayRealisateurs = false;\n      this.displayActeurs = false;\n      this.genreFound = false;\n      this.realFound = false;\n      this.actorFound = false;\n      this.searching = false;\n      genresAvances.forEach(genre => this.genres.push(genre));\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\n        _this.movies = (yield _this.movieService.getMoviesPage(0)).content;\n        _this.bestMovie = yield _this.movieService.getBestAlloMovie();\n        _this.actors = _this.movieService.getActors();\n        _this.realisateurs = _this.movieService.getRealisateurs();\n        //this.notes = this.noteService.getNotes();\n        // this.sub = this.movieService.getFirstAlloMovie().subscribe((movie: Movie) => {\n        //   this.bestMovie = movie;\n        //   this.unsubscribe();\n        // })\n        // this.sub = this.noteService.getBestAllocine().subscribe(list => {\n        //   this.bestAlloGrades.push(...list);\n        //   this.splitMoviesAllocine();\n        //   this.searchFromSavedSelectedItems();\n        //   this.unsubscribe();\n        // });\n        _this.oldBestAlloGrades = _this.bestAlloGrades;\n        _this.movieService.getSearch().subscribe(search => {\n          _this.movieSearch(search);\n        });\n      })();\n    }\n    unsubscribe() {\n      if (this.sub != undefined) {\n        this.sub.unsubscribe();\n      }\n    }\n    ngDoCheck() {\n      if (this.realisateurs.length >= 1 && this.tenReals.length === 0) {\n        for (let i = 0; i < this.realisateurs.length; i++) {\n          this.realisateurs[i] = this.realisateurs[i].toLowerCase();\n          if (this.tenReals.length < 10) {\n            this.tenReals.push(this.realisateurs[i]);\n          }\n        }\n      }\n      if (this.actors.length >= 1 && this.tenActors.length === 0) {\n        for (let i = 0; i < this.actors.length; i++) {\n          this.actors[i] = this.actors[i].toLowerCase();\n          if (this.tenActors.length < 10) {\n            this.tenActors.push(this.actors[i]);\n          }\n        }\n      }\n    }\n    movieSearch(search) {\n      if (typeof search !== 'undefined' && search !== \"\") {\n        this.movieSearched.splice(0, this.movieSearched.length);\n        for (let movie of this.movies) {\n          if (movie.titre.toLowerCase().indexOf(search) !== -1) {\n            if (this.movieSearched.indexOf(movie) === -1) {\n              this.movieSearched.push(movie);\n              this.searching = true;\n            }\n          }\n        }\n      } else {\n        this.searching = false;\n      }\n    }\n    switchMode() {\n      this.exclusion = !this.exclusion;\n    }\n    searched(searchValue) {\n      this.genreFound = false;\n      this.realFound = false;\n      this.actorFound = false;\n      if (this.genresAvance.indexOf(searchValue.toLowerCase()) !== -1) {\n        this.genreFound = true;\n        this.genreInput = this.movieService.getUpperForFirstLetter(searchValue);\n      } else if (this.realisateurs.indexOf(searchValue.toLowerCase()) !== -1) {\n        this.realFound = true;\n        this.realInput = this.movieService.getUpperForFirstLetter(searchValue);\n      } else if (this.actors.indexOf(searchValue.toLowerCase()) !== -1) {\n        this.actorFound = true;\n        this.actorInput = this.movieService.getUpperForFirstLetter(searchValue);\n      }\n    }\n    pushListForCarroussel(array, index) {\n      for (let i = 0; i < 7; i++) {\n        array.push(this.bestAlloGrades[index + i]);\n      }\n    }\n    displayBoxes(type) {\n      if (type === \"genresSimples\") {\n        this.displayGenres = !this.displayGenres;\n        this.displayGenresAvance = false;\n        this.displayRealisateurs = false;\n        this.displayActeurs = false;\n      } else if (type === \"genresAvances\") {\n        this.displayGenresAvance = !this.displayGenresAvance;\n        this.displayGenres = false;\n        this.displayRealisateurs = false;\n        this.displayActeurs = false;\n      } else if (type === \"reals\") {\n        this.displayRealisateurs = !this.displayRealisateurs;\n        this.displayGenres = false;\n        this.displayGenresAvance = false;\n        this.displayActeurs = false;\n      } else if (type === \"acteurs\") {\n        this.displayActeurs = !this.displayActeurs;\n        this.displayGenres = false;\n        this.displayGenresAvance = false;\n        this.displayRealisateurs = false;\n      }\n    }\n  }\n  _class = MainComponent;\n  _class.ɵfac = function MainComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.MoviesService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-main\"]],\n    decls: 39,\n    vars: 28,\n    consts: [[1, \"container\"], [1, \"mode\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"ngClass\"], [1, \"btn\", \"btn-link\", \"mb-2\", 3, \"click\"], [\"type\", \"text\", \"class\", \"form-control\", 3, \"input\", 4, \"ngIf\"], [\"placeholder\", \"Chercher un r\\u00E9alisateur\", \"type\", \"text\", \"class\", \"form-control\", 3, \"input\", 4, \"ngIf\"], [\"placeholder\", \"Chercher un acteur\", \"type\", \"text\", \"class\", \"form-control\", 3, \"input\", 4, \"ngIf\"], [3, \"categorie\", 4, \"ngIf\"], [3, \"categorie\", \"itemFound\", \"itemInput\", 4, \"ngIf\"], [3, \"items\", \"itemFound\", \"itemInput\", 4, \"ngIf\"], [4, \"ngIf\"], [\"id\", \"bestMoviesChecked\", 1, \"row\"], [\"id\", \"bestMovie\", 4, \"ngIf\"], [1, \"caroussels\"], [3, \"firstMovie\", \"page\"], [\"type\", \"text\", 1, \"form-control\", 3, \"input\"], [\"placeholder\", \"Chercher un r\\u00E9alisateur\", \"type\", \"text\", 1, \"form-control\", 3, \"input\"], [\"placeholder\", \"Chercher un acteur\", \"type\", \"text\", 1, \"form-control\", 3, \"input\"], [3, \"categorie\"], [3, \"categorie\", \"itemFound\", \"itemInput\"], [3, \"items\", \"itemFound\", \"itemInput\"], [1, \"row\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"movie\", 1, \"col-sm-2\"], [3, \"routerLink\"], [1, \"image\", 3, \"src\", \"alt\"], [\"id\", \"bestMovie\"], [1, \"block\"], [3, \"score\", \"forDisplay\"], [1, \"synospis\"]],\n    template: function MainComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \" Vous ne savez pas ce que vous voulez, mais vous savez ce que vous ne voulez pas... Exclusio est l\\u00E0 ! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"h3\");\n        i0.ɵɵtext(4, \" Un simple clique et vous enlevez ce qui ne vous plait pas, Exclusio se charge du reste ! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1)(6, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_6_listener() {\n          return ctx.switchMode();\n        });\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"ul\")(9, \"li\", 3)(10, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_10_listener() {\n          return ctx.displayBoxes(\"genresSimples\");\n        });\n        i0.ɵɵtext(11, \" Exclusions simples \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"li\", 3)(13, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_13_listener() {\n          return ctx.displayBoxes(\"genresAvances\");\n        });\n        i0.ɵɵtext(14, \" Sous genres \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, MainComponent_input_15_Template, 1, 0, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"li\", 3)(17, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_17_listener() {\n          return ctx.displayBoxes(\"reals\");\n        });\n        i0.ɵɵtext(18, \" R\\u00E9alisateurs \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(19, MainComponent_input_19_Template, 1, 0, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"li\", 3)(21, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_21_listener() {\n          return ctx.displayBoxes(\"acteurs\");\n        });\n        i0.ɵɵtext(22, \" Acteurs \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, MainComponent_input_23_Template, 1, 0, \"input\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(24, MainComponent_app_checkboxes_24_Template, 1, 1, \"app-checkboxes\", 8);\n        i0.ɵɵtemplate(25, MainComponent_app_checkboxes_25_Template, 1, 3, \"app-checkboxes\", 9);\n        i0.ɵɵtemplate(26, MainComponent_app_checkboxes_26_Template, 1, 3, \"app-checkboxes\", 10);\n        i0.ɵɵtemplate(27, MainComponent_app_checkboxes_27_Template, 1, 3, \"app-checkboxes\", 10);\n        i0.ɵɵelement(28, \"br\");\n        i0.ɵɵtemplate(29, MainComponent_div_29_Template, 6, 1, \"div\", 11);\n        i0.ɵɵelementStart(30, \"h1\");\n        i0.ɵɵtext(31, \"Selection de films\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"hr\");\n        i0.ɵɵelementStart(33, \"div\", 12);\n        i0.ɵɵtemplate(34, MainComponent_div_34_Template, 11, 10, \"div\", 13);\n        i0.ɵɵelementStart(35, \"div\", 14);\n        i0.ɵɵelement(36, \"app-caroussel\", 15)(37, \"app-caroussel\", 15)(38, \"app-caroussel\", 15);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" Passer en mode \", ctx.exclusion ? \"Inclusion\" : \"Exclusion\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(20, _c1, ctx.displayGenres));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(22, _c1, ctx.displayGenresAvance));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayGenresAvance);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(24, _c1, ctx.displayRealisateurs));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayRealisateurs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(26, _c1, ctx.displayActeurs));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayActeurs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayGenres);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayGenresAvance);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayRealisateurs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayActeurs);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.searching);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.bestMovie);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"firstMovie\", ctx.bestMovie)(\"page\", 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"firstMovie\", ctx.bestMovie)(\"page\", 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"firstMovie\", ctx.bestMovie)(\"page\", 2);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.RouterLink, i4.StarRatingComponent, i5.CheckboxesComponent, i6.CarousselComponent],\n    styles: [\".container{color:#fff;padding-left:6%;margin:0}#movie{padding:10px}.image{width:120px;height:170px}.pegi{width:50px;height:50px}#bestMoviesChecked{position:relative}#bestMovie{position:relative;width:20vh}.caroussels{width:130vh}input[type=text]{width:175px;height:30px;border-radius:10px}.my-custom-class .tooltip-inner{background-color:#00008b;max-width:300px}ul{list-style-type:none;margin:0;padding:0}li{display:inline-block;vertical-align:top}.btn-link{color:#fff;background-color:transparent;position:relative}.mode{float:right}.items{background-color:#0000004d}h2,h3{text-align:center;margin:0%;padding:0%}hr{color:#fff}.checkboxrondes{background-color:#0003}.synospis{width:100%;height:60%;overflow-y:scroll}h1{padding-left:3%}.row{margin-left:1px}\\n\"],\n    encapsulation: 2\n  });\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}